{"primaryContentSections":[{"content":[{"type":"heading","text":"Overview","anchor":"Overview","level":2},{"type":"paragraph","inlineContent":[{"text":"Tree-based navigation is the process of modeling navigation using optional and enum state. This","type":"text"},{"type":"text","text":" "},{"type":"text","text":"style of navigation allows you to deep-link into any state of your application by simply"},{"type":"text","text":" "},{"text":"constructing a deeply nested piece of state, handing it off to SwiftUI, and letting it take care of","type":"text"},{"type":"text","text":" "},{"text":"the rest.","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"#Basics"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"#Enum-state","isActive":true}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"#Integration"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"#Dismissal","type":"reference","isActive":true}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"#Testing","isActive":true}]}]}],"type":"unorderedList"},{"anchor":"Basics","type":"heading","text":"Basics","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"The tools for this style of navigation include the "},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Presents()","type":"reference","isActive":true},{"type":"text","text":" macro,"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction"},{"type":"text","text":", the "},{"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer\/ifLet(_:action:destination:fileID:filePath:line:column:)-4ub6q","isActive":true},{"type":"text","text":" operator,"},{"type":"text","text":" "},{"type":"text","text":"and that is all. Once your feature is properly integrated with those tools you can use all of"},{"text":" ","type":"text"},{"text":"SwiftUI’s normal navigation view modifiers, such as ","type":"text"},{"code":"sheet(item:)","type":"codeVoice"},{"text":", ","type":"text"},{"type":"codeVoice","code":"popover(item:)"},{"text":", etc.","type":"text"}]},{"inlineContent":[{"text":"The process of integrating two features together for navigation largely consists of 2 steps:","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"integrating the features’ domains together and integrating the features’ views together. One"},{"type":"text","text":" "},{"type":"text","text":"typically starts by integrating the features’ domains together. This consists of adding the child’s"},{"type":"text","text":" "},{"type":"text","text":"state and actions to the parent, and then utilizing a reducer operator to compose the child reducer"},{"text":" ","type":"text"},{"text":"into the parent.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"For example, suppose you have a list of items and you want to be able to show a sheet to display a"},{"type":"text","text":" "},{"text":"form for adding a new item. We can integrate state and actions together by utilizing the","type":"text"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Presents()"},{"type":"text","text":" macro and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction"},{"type":"text","text":" type:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Reducer","struct InventoryFeature {","  @ObservableState","  struct State: Equatable {","    @Presents var addItem: ItemFormFeature.State?","    var items: IdentifiedArrayOf<Item> = []","    \/\/ ...","  }","","  enum Action {","    case addItem(PresentationAction<ItemFormFeature.Action>)","    \/\/ ...","  }","","  \/\/ ...","}"]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"code":"addItem","type":"codeVoice"},{"type":"text","text":" state is held as an optional. A non-"},{"type":"codeVoice","code":"nil"},{"type":"text","text":" value represents that feature is"},{"type":"text","text":" "},{"text":"being presented, and ","type":"text"},{"code":"nil","type":"codeVoice"},{"type":"text","text":" presents the feature is dismissed."}]}],"style":"note","type":"aside","name":"Note"},{"inlineContent":[{"type":"text","text":"Next you can integrate the reducers of the parent and child features by using the"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer\/ifLet(_:action:destination:fileID:filePath:line:column:)-4ub6q"},{"type":"text","text":" reducer operator, as well as having an"},{"type":"text","text":" "},{"type":"text","text":"action in the parent domain for populating the child’s state to drive navigation:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Reducer","struct InventoryFeature {","  @ObservableState","  struct State: Equatable { \/* ... *\/ }","  enum Action { \/* ... *\/ }","  ","  var body: some ReducerOf<Self> {","    Reduce { state, action in ","      switch action {","      case .addButtonTapped:","        \/\/ Populating this state performs the navigation","        state.addItem = ItemFormFeature.State()","        return .none","","      \/\/ ...","      }","    }","    .ifLet(\\.$addItem, action: \\.addItem) {","      ItemFormFeature()","    }","  }","}"]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The key path used with "},{"type":"codeVoice","code":"ifLet"},{"text":" focuses on the ","type":"text"},{"type":"codeVoice","code":"@PresentationState"},{"type":"text","text":" projected value since it"},{"text":" ","type":"text"},{"text":"uses the ","type":"text"},{"type":"codeVoice","code":"$"},{"type":"text","text":" syntax. Also note that the action uses a"},{"type":"text","text":" "},{"identifier":"http:\/\/github.com\/pointfreeco\/swift-case-paths","isActive":true,"type":"reference"},{"type":"text","text":", which is analogous to key paths but"},{"text":" ","type":"text"},{"text":"tuned for enums.","type":"text"}]}],"style":"note","name":"Note","type":"aside"},{"inlineContent":[{"text":"That’s all that it takes to integrate the domains and logic of the parent and child features. Next","type":"text"},{"type":"text","text":" "},{"type":"text","text":"we need to integrate the features’ views. This is done by passing a binding of a store to one"},{"text":" ","type":"text"},{"text":"of SwiftUI’s view modifiers.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"For example, to show a sheet from the "},{"type":"codeVoice","code":"addItem"},{"type":"text","text":" state in the "},{"code":"InventoryFeature","type":"codeVoice"},{"type":"text","text":", we can hand"},{"type":"text","text":" "},{"text":"the ","type":"text"},{"type":"codeVoice","code":"sheet(item:)"},{"text":" modifier a binding of a ","type":"text"},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Store","isActive":true,"type":"reference"},{"type":"text","text":" as an argument that is focused on presentation"},{"text":" ","type":"text"},{"type":"text","text":"state and actions:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["struct InventoryView: View {","  @Bindable var store: StoreOf<InventoryFeature>","","  var body: some View {","    List {","      \/\/ ...","    }","    .sheet(","      item: $store.scope(state: \\.addItem, action: \\.addItem)","    ) { store in","      ItemFormView(store: store)","    }","  }","}"]},{"style":"note","type":"aside","name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"We use SwiftUI’s ","type":"text"},{"type":"codeVoice","code":"@Bindable"},{"type":"text","text":" property wrapper to produce a binding to a store, which can be"},{"type":"text","text":" "},{"text":"further scoped using ","type":"text"},{"type":"codeVoice","code":"SwiftUI\/Binding\/scope(state:action:fileID:filePath:line:column:)"},{"text":".","type":"text"}]}]},{"inlineContent":[{"type":"text","text":"With those few steps completed the domains and views of the parent and child features are now"},{"type":"text","text":" "},{"text":"integrated together, and when the ","type":"text"},{"type":"codeVoice","code":"addItem"},{"text":" state flips to a non-","type":"text"},{"code":"nil","type":"codeVoice"},{"type":"text","text":" value the sheet will be"},{"type":"text","text":" "},{"text":"presented, and when it is ","type":"text"},{"type":"codeVoice","code":"nil"},{"text":"’d out it will be dismissed.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"In this example we are using the ","type":"text"},{"code":".sheet","type":"codeVoice"},{"type":"text","text":" view modifier, but every view modifier SwiftUI ships can"},{"type":"text","text":" "},{"type":"text","text":"be handed a store in this fashion, including "},{"code":"popover(item:)","type":"codeVoice"},{"text":", ","type":"text"},{"type":"codeVoice","code":"fullScreenCover(item:), "},{"type":"text","text":"navigationDestination(item:)`, and more. This should make it possible to use optional state to"},{"text":" ","type":"text"},{"type":"text","text":"drive any kind of navigation in a SwiftUI application."}]},{"type":"heading","level":2,"text":"Enum state","anchor":"Enum-state"},{"type":"paragraph","inlineContent":[{"text":"While driving navigation with optional state can be powerful, it can also lead to less-than-ideal","type":"text"},{"type":"text","text":" "},{"text":"modeled domains. In particular, if a feature can navigate to multiple screens then you may be","type":"text"},{"type":"text","text":" "},{"type":"text","text":"tempted to model that with multiple optional values:"}]},{"code":["@ObservableState","struct State {","  @Presents var detailItem: DetailFeature.State?","  @Presents var editItem: EditFeature.State?","  @Presents var addItem: AddFeature.State?","  \/\/ ...","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"However, this can lead to invalid states, such as 2 or more states being non-nil at the same time,","type":"text"},{"type":"text","text":" "},{"type":"text","text":"and that can cause a lot of problems. First of all, SwiftUI does not support presenting multiple"},{"type":"text","text":" "},{"text":"views at the same time from a single view, and so by allowing this in our state we run the risk of","type":"text"},{"type":"text","text":" "},{"text":"putting our application into an inconsistent state with respect to SwiftUI.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Second, it becomes more difficult for us to determine what feature is actually being presented. We"},{"text":" ","type":"text"},{"type":"text","text":"must check multiple optionals to figure out which one is non-"},{"type":"codeVoice","code":"nil"},{"type":"text","text":", and then we must figure out how"},{"type":"text","text":" "},{"type":"text","text":"to interpret when multiple pieces of state are non-"},{"type":"codeVoice","code":"nil"},{"type":"text","text":" at the same time."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"And the number of invalid states increases exponentially with respect to the number of features that"},{"type":"text","text":" "},{"text":"can be navigated to. For example, 3 optionals leads to 4 invalid states, 4 optionals leads to 11","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"invalid states, and 5 optionals leads to 26 invalid states."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For these reasons, and more, it can be better to model multiple destinations in a feature as a"},{"text":" ","type":"text"},{"text":"single enum rather than multiple optionals. So the example of above, with 3 optionals, can be","type":"text"},{"type":"text","text":" "},{"text":"refactored as an enum:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["enum State {","  case addItem(AddFeature.State)","  case detailItem(DetailFeature.State)","  case editItem(EditFeature.State)","  \/\/ ...","}"]},{"inlineContent":[{"text":"This gives us compile-time proof that only one single destination can be active at a time.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In order to utilize this style of domain modeling you must take a few extra steps. First you model a"},{"type":"text","text":" "},{"text":"“destination” reducer that encapsulates the domains and behavior of all of the features that you can","type":"text"},{"type":"text","text":" "},{"text":"navigate to. Typically it’s best to nest this reducer inside the feature that can perform the","type":"text"},{"text":" ","type":"text"},{"text":"navigation, and the ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer()"},{"text":" macro can do most of the heavy lifting for us by implementing the","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"entire reducer from a simple description of the features that can be navigated to:"}],"type":"paragraph"},{"code":["@Reducer","struct InventoryFeature {","  \/\/ ...","","  @Reducer","  enum Destination {","    case addItem(AddFeature)","    case detailItem(DetailFeature)","    case editItem(EditFeature)","  }","}"],"syntax":"swift","type":"codeListing"},{"style":"note","name":"Note","type":"aside","content":[{"inlineContent":[{"text":"The ","type":"text"},{"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer()","isActive":true},{"type":"text","text":" macro takes this simple enum description of destination features and"},{"type":"text","text":" "},{"type":"text","text":"expands it into a fully composed feature that operates on enum state with a case for each"},{"text":" ","type":"text"},{"type":"text","text":"feature’s state. You can expand the macro code in Xcode to see everything that is written for you."}],"type":"paragraph"}]},{"type":"paragraph","inlineContent":[{"text":"With that done we can now hold onto a ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"single"}]},{"type":"text","text":" piece of optional state in our feature, using the"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Presents()"},{"type":"text","text":" macro, and we hold onto the destination actions using the"},{"type":"text","text":" "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction"},{"text":" type:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["@Reducer","struct InventoryFeature {","  @ObservableState","  struct State { ","    @Presents var destination: Destination.State?","    \/\/ ...","  }","  enum Action {","    case destination(PresentationAction<Destination.Action>)","    \/\/ ...","  }","","  \/\/ ...","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"And then we must make use of the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer\/ifLet(_:action:destination:fileID:filePath:line:column:)-4ub6q"},{"text":" operator","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"to integrate the domain of the destination with the domain of the parent feature:"}]},{"type":"codeListing","code":["@Reducer","struct InventoryFeature {","  \/\/ ...","","  var body: some ReducerOf<Self> {","    Reduce { state, action in ","      \/\/ ...","    }","    .ifLet(\\.$destination, action: \\.destination) ","  }","}"],"syntax":"swift"},{"name":"Note","style":"note","type":"aside","content":[{"inlineContent":[{"type":"text","text":"It’s not necessary to specify "},{"code":"Destination","type":"codeVoice"},{"text":" in a trialing closure of ","type":"text"},{"type":"codeVoice","code":"ifLet"},{"text":" because it can","type":"text"},{"text":" ","type":"text"},{"text":"automatically be inferred due to how the ","type":"text"},{"code":"Destination","type":"codeVoice"},{"text":" enum was defined with the ","type":"text"},{"isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer()","type":"reference"},{"type":"text","text":" "},{"text":"macro.","type":"text"}],"type":"paragraph"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"That completes the steps for integrating the child and parent features together."}]},{"type":"paragraph","inlineContent":[{"text":"Now when we want to present a particular feature we can simply populate the ","type":"text"},{"type":"codeVoice","code":"destination"},{"type":"text","text":" state"},{"text":" ","type":"text"},{"type":"text","text":"with a case of the enum:"}]},{"code":["case addButtonTapped:","  state.destination = .addItem(AddFeature.State())","  return .none"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"And at any time we can figure out exactly what feature is being presented by switching or otherwise"},{"text":" ","type":"text"},{"type":"text","text":"destructuring the single piece of "},{"code":"destination","type":"codeVoice"},{"text":" state rather than checking multiple optional values.","type":"text"}]},{"inlineContent":[{"text":"The final step is to make use of the library’s scoping powers to focus in on the ","type":"text"},{"code":"Destination","type":"codeVoice"},{"type":"text","text":" "},{"text":"domain and further isolate a particular case of the state and action enums via dot-chaining.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"For example, suppose the “add” screen is presented as a sheet, the “edit” screen is presented"},{"text":" ","type":"text"},{"type":"text","text":"by a popover, and the “detail” screen is presented in a drill-down. Then we can use the"},{"type":"text","text":" "},{"type":"codeVoice","code":".sheet(item:)"},{"text":", ","type":"text"},{"type":"codeVoice","code":".popover(item:)"},{"type":"text","text":", and "},{"type":"codeVoice","code":".navigationDestination(item:)"},{"type":"text","text":" view modifiers that come"},{"text":" ","type":"text"},{"text":"from SwiftUI to have each of those styles of presentation powered by the respective case of the","type":"text"},{"type":"text","text":" "},{"text":"destination enum.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To do this you must first hold onto the store in a bindable manner by using the "},{"type":"codeVoice","code":"@Bindable"},{"text":" property","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"wrapper:"}]},{"type":"codeListing","code":["struct InventoryView: View {","  @Bindable var store: StoreOf<InventoryFeature>","  \/\/ ...","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"And then in the "},{"code":"body","type":"codeVoice"},{"type":"text","text":" of the view you can use the"},{"text":" ","type":"text"},{"code":"SwiftUI\/Binding\/scope(state:action:fileID:filePath:line:column:)","type":"codeVoice"},{"type":"text","text":" operator to derive bindings from "},{"type":"codeVoice","code":"$store"},{"type":"text","text":":"}]},{"code":["var body: some View {","  List {","    \/\/ ...","  }","  .sheet(","    item: $store.scope(","      state: \\.destination?.addItem,","      action: \\.destination.addItem","    )","  ) { store in ","    AddFeatureView(store: store)","  }","  .popover(","    item: $store.scope(","      state: \\.destination?.editItem,","      action: \\.destination.editItem","    )","  ) { store in ","    EditFeatureView(store: store)","  }","  .navigationDestination(","    item: $store.scope(","      state: \\.destination?.detailItem,","      action: \\.destination.detailItem","    )","  ) { store in ","    DetailFeatureView(store: store)","  }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"With those steps completed you can be sure that your domains are modeled as concisely as possible."},{"type":"text","text":" "},{"type":"text","text":"If the “add” item sheet was presented, and you decided to mutate the "},{"type":"codeVoice","code":"destination"},{"text":" state to point","type":"text"},{"text":" ","type":"text"},{"text":"to the ","type":"text"},{"code":".detailItem","type":"codeVoice"},{"type":"text","text":" case, then you can be certain that the sheet will be dismissed and the"},{"type":"text","text":" "},{"text":"drill-down will occur immediately.","type":"text"}]},{"level":3,"type":"heading","text":"API Unification","anchor":"API-Unification"},{"type":"paragraph","inlineContent":[{"type":"text","text":"One of the best features of tree-based navigation is that it unifies all forms of navigation with a"},{"type":"text","text":" "},{"type":"text","text":"single style of API. First of all, regardless of the type of navigation you plan on performing,"},{"type":"text","text":" "},{"text":"integrating the parent and child features together can be done with the single","type":"text"},{"text":" ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer\/ifLet(_:action:destination:fileID:filePath:line:column:)-4ub6q"},{"type":"text","text":" operator. This one single API services"},{"type":"text","text":" "},{"type":"text","text":"all forms of optional-driven navigation."}]},{"inlineContent":[{"type":"text","text":"And then in the view, whether you are wanting to perform a drill-down, show a sheet, display"},{"text":" ","type":"text"},{"text":"an alert, or even show a custom navigation component, all you need to do is invoke an API that","type":"text"},{"text":" ","type":"text"},{"text":"is provided a store focused on some ","type":"text"},{"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationState","isActive":true},{"text":" and ","type":"text"},{"isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction","type":"reference"},{"text":". If you do","type":"text"},{"type":"text","text":" "},{"text":"that, then the API can handle the rest, making sure to present the child view when the state","type":"text"},{"type":"text","text":" "},{"type":"text","text":"becomes non-"},{"type":"codeVoice","code":"nil"},{"text":" and dismissing when it goes back to ","type":"text"},{"code":"nil","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"This means that theoretically you could have a single view that needs to be able to show a sheet,","type":"text"},{"type":"text","text":" "},{"type":"text","text":"popover, drill-down, alert "},{"type":"emphasis","inlineContent":[{"type":"text","text":"and"}]},{"text":" confirmation dialog, and all of the work to display the various","type":"text"},{"text":" ","type":"text"},{"text":"forms of navigation could be as simple as this:","type":"text"}],"type":"paragraph"},{"code":[".sheet(","  item: $store.scope(state: \\.addItem, action: \\.addItem)",") { store in ","  AddFeatureView(store: store)","}",".popover(","  item: $store.scope(state: \\.editItem, action: \\.editItem)",") { store in ","  EditFeatureView(store: store)","}",".navigationDestination(","  item: $store.scope(state: \\.detailItem, action: \\.detailItem)",") { store in ","  DetailFeatureView(store: store)","}",".alert(","  $store.scope(state: \\.alert, action: \\.alert)",")",".confirmationDialog(","  $store.scope(state: \\.confirmationDialog, action: \\.confirmationDialog)",")"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"text":"In each case we provide a store scoped to the presentation domain, and a view that will be presented","type":"text"},{"type":"text","text":" "},{"type":"text","text":"when its corresponding state flips to non-"},{"type":"codeVoice","code":"nil"},{"text":". It is incredibly powerful to see that so many","type":"text"},{"type":"text","text":" "},{"type":"text","text":"seemingly disparate forms of navigation can be unified under a single style of API."}],"type":"paragraph"},{"type":"heading","level":4,"text":"Backwards compatible availability","anchor":"Backwards-compatible-availability"},{"inlineContent":[{"text":"Depending on your deployment target, certain APIs may be unavailable. For example, if you target ","type":"text"},{"type":"text","text":"\n"},{"type":"text","text":"platforms earlier than iOS 16, macOS 13, tvOS 16 and watchOS 9, then you cannot use"},{"text":" ","type":"text"},{"type":"codeVoice","code":"navigationDestination"},{"text":". Instead you can use ","type":"text"},{"code":"NavigationLink","type":"codeVoice"},{"type":"text","text":", but you must define helper for"},{"type":"text","text":" "},{"type":"text","text":"driving navigation off of a binding of data rather than just a simple boolean. Just paste"},{"type":"text","text":" "},{"type":"text","text":"the following into your project:"}],"type":"paragraph"},{"code":["@available(iOS, introduced: 13, deprecated: 16)","@available(macOS, introduced: 10.15, deprecated: 13)","@available(tvOS, introduced: 13, deprecated: 16)","@available(watchOS, introduced: 6, deprecated: 9)","extension NavigationLink {","  public init<D, C: View>(","    item: Binding<D?>,","    onNavigate: @escaping (_ isActive: Bool) -> Void,","    @ViewBuilder destination: (D) -> C,","    @ViewBuilder label: () -> Label","  ) where Destination == C? {","    self.init(","      destination: item.wrappedValue.map(destination),","      isActive: Binding(","        get: { item.wrappedValue != nil },","        set: { isActive, transaction in","          onNavigate(isActive)","          if !isActive {","            item.transaction(transaction).wrappedValue = nil","          }","        }","      ),","      label: label","    )","  }","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"That gives you the ability to drive a ","type":"text"},{"type":"codeVoice","code":"NavigationLink"},{"type":"text","text":" from state. When the link is tapped the"},{"text":" ","type":"text"},{"code":"onNavigate","type":"codeVoice"},{"type":"text","text":" closure will be invoked, giving you the ability to populate state. And when the"},{"type":"text","text":" "},{"type":"text","text":"feature is dismissed, the state will be "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"’d out."}],"type":"paragraph"},{"type":"heading","text":"Integration","anchor":"Integration","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once your features are integrated together using the steps above, your parent feature gets instant"},{"type":"text","text":" "},{"text":"access to everything happening inside the child feature. You can use this as a means to integrate","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"the logic of child and parent features. For example, if you want to detect when the “Save” button"},{"text":" ","type":"text"},{"text":"inside the edit feature is tapped, you can simply destructure on that action. This consists of","type":"text"},{"type":"text","text":" "},{"type":"text","text":"pattern matching on the "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction"},{"text":", then the ","type":"text"},{"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction\/presented(_:)","isActive":true},{"type":"text","text":" case,"},{"type":"text","text":" "},{"type":"text","text":"then the feature you are interested in, and finally the action you are interested in:"}]},{"syntax":"swift","type":"codeListing","code":["case .destination(.presented(.editItem(.saveButtonTapped))):","  \/\/ ..."]},{"type":"paragraph","inlineContent":[{"text":"Once inside that case you can then try extracting out the feature state so that you can perform","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"additional logic, such as closing the “edit” feature and saving the edited item to the database:"}]},{"code":["case .destination(.presented(.editItem(.saveButtonTapped))):","  guard case let .editItem(editItemState) = state.destination","  else { return .none }","","  state.destination = nil","  return .run { _ in","    self.database.save(editItemState.item)","  }"],"type":"codeListing","syntax":"swift"},{"level":2,"anchor":"Dismissal","text":"Dismissal","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Dismissing a presented feature is as simple as ","type":"text"},{"type":"codeVoice","code":"nil"},{"type":"text","text":"-ing out the state that represents the"},{"text":" ","type":"text"},{"text":"presented feature:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["case .closeButtonTapped:","  state.destination = nil","  return .none"]},{"type":"paragraph","inlineContent":[{"text":"In order to ","type":"text"},{"code":"nil","type":"codeVoice"},{"type":"text","text":" out the presenting state you must have access to that state, and usually only the"},{"type":"text","text":" "},{"type":"text","text":"parent has access, but often we would like to encapsulate the logic of dismissing a feature to be"},{"text":" ","type":"text"},{"type":"text","text":"inside the child feature without needing explicit communication with the parent."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"SwiftUI provides a wonderful tool for allowing child "},{"type":"emphasis","inlineContent":[{"text":"views","type":"text"}]},{"type":"text","text":" to dismiss themselves from the parent,"},{"text":" ","type":"text"},{"text":"all without any explicit communication with the parent. It’s an environment value called ","type":"text"},{"type":"codeVoice","code":"dismiss"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"text","text":"and it can be used like so:"}]},{"code":["struct ChildView: View {","  @Environment(\\.dismiss) var dismiss","  var body: some View {","    Button(\"Close\") { self.dismiss() }","  }","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"type":"text","text":"When "},{"code":"self.dismiss()","type":"codeVoice"},{"text":" is invoked, SwiftUI finds the closest parent view with a presentation, and","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"causes it to dismiss by writing "},{"type":"codeVoice","code":"false"},{"type":"text","text":" or "},{"type":"codeVoice","code":"nil"},{"text":" to the binding that drives the presentation. This","type":"text"},{"type":"text","text":" "},{"type":"text","text":"can be incredibly useful, but it is also relegated to the view layer. It is not possible to use"},{"type":"text","text":" "},{"type":"codeVoice","code":"dismiss"},{"text":" elsewhere, like in an observable object, which would allow you to have nuanced logic","type":"text"},{"type":"text","text":" "},{"text":"for dismissal such as validation or async work.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The Composable Architecture has a similar tool, except it is appropriate to use from a reducer,","type":"text"},{"text":" ","type":"text"},{"text":"where the rest of your feature’s logic and behavior resides. It is accessed via the library’s","type":"text"},{"type":"text","text":" "},{"type":"text","text":"dependency management system (see "},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/DependencyManagement","type":"reference","isActive":true},{"type":"text","text":") using "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/DismissEffect"},{"type":"text","text":":"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["@Reducer","struct Feature {","  @ObservableState","  struct State { \/* ... *\/ }","  enum Action { ","    case closeButtonTapped","    \/\/ ...","  }","  @Dependency(\\.dismiss) var dismiss","  var body: some Reducer<State, Action> {","    Reduce { state, action in","      switch action {","      case .closeButtonTapped:","        return .run { _ in await self.dismiss() }","      }","    }","  }","}"]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/DismissEffect","type":"reference"},{"type":"text","text":" function is async which means it cannot be invoked directly inside a"},{"text":" ","type":"text"},{"text":"reducer. Instead it must be called from ","type":"text"},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Effect\/run(priority:operation:catch:fileID:filePath:line:column:)","isActive":true,"type":"reference"},{"text":".","type":"text"}]}],"type":"aside","name":"Note"},{"inlineContent":[{"text":"When ","type":"text"},{"code":"self.dismiss()","type":"codeVoice"},{"type":"text","text":" is invoked it will "},{"type":"codeVoice","code":"nil"},{"type":"text","text":" out the state responsible for presenting the feature"},{"type":"text","text":" "},{"type":"text","text":"by sending a "},{"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction\/dismiss","isActive":true},{"text":" action back into the system, causing the feature to be","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"dismissed. This allows you to encapsulate the logic for dismissing a child feature entirely inside"},{"type":"text","text":" "},{"text":"the child domain without explicitly communicating with the parent.","type":"text"}],"type":"paragraph"},{"type":"aside","content":[{"inlineContent":[{"type":"text","text":"Because dismissal is handled by sending an action, it is not valid to ever send an action"},{"type":"text","text":" "},{"text":"after invoking ","type":"text"},{"code":"dismiss()","type":"codeVoice"},{"type":"text","text":":"}],"type":"paragraph"},{"syntax":"swift","code":["return .run { send in ","  await self.dismiss()","  await send(.tick)  \/\/ ⚠️","}"],"type":"codeListing"},{"inlineContent":[{"text":"To do so would be to send an action for a feature while its state is ","type":"text"},{"code":"nil","type":"codeVoice"},{"type":"text","text":", and that will cause"},{"type":"text","text":" "},{"type":"text","text":"a runtime warning in Xcode and a test failure when running tests."}],"type":"paragraph"}],"style":"note","name":"Note"},{"style":"warning","type":"aside","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"SwiftUI’s environment value "},{"type":"codeVoice","code":"@Environment(\\.dismiss)"},{"type":"text","text":" and the Composable Architecture’s"},{"text":" ","type":"text"},{"type":"text","text":"dependency value "},{"type":"codeVoice","code":"@Dependency(\\.dismiss)"},{"type":"text","text":" serve similar purposes, but are completely different"},{"type":"text","text":" "},{"text":"types. SwiftUI’s environment value can only be used in SwiftUI views, and this library’s","type":"text"},{"type":"text","text":" "},{"type":"text","text":"dependency value can only be used inside reducers."}]}],"name":"Warning"},{"text":"Testing","anchor":"Testing","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"text":"A huge benefit of properly modeling your domains for navigation is that testing becomes quite easy.","type":"text"},{"text":" ","type":"text"},{"text":"Further, using “non-exhaustive testing” (see ","type":"text"},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Testing#Non-exhaustive-testing","isActive":true,"type":"reference"},{"type":"text","text":") can be very"},{"type":"text","text":" "},{"type":"text","text":"useful for testing navigation since you often only want to assert on a few high level details and"},{"type":"text","text":" "},{"type":"text","text":"not all state mutations and effects."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As an example, consider the following simple counter feature that wants to dismiss itself if its"},{"type":"text","text":" "},{"text":"count is greater than or equal to 5:","type":"text"}]},{"code":["@Reducer","struct CounterFeature {","  @ObservableState","  struct State: Equatable {","    var count = 0","  }","  enum Action {","    case decrementButtonTapped","    case incrementButtonTapped","  }","","  @Dependency(\\.dismiss) var dismiss","","  var body: some Reducer<State, Action> {","    Reduce { state, action in","      switch action {","      case .decrementButtonTapped:","        state.count -= 1","        return .none","","      case .incrementButtonTapped:","        state.count += 1","        return state.count >= 5","          ? .run { _ in await self.dismiss() }","          : .none","      }","    }","  }","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"text","text":"And then let’s embed that feature into a parent feature using the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Presents()"},{"type":"text","text":" macro,"},{"text":" ","type":"text"},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction","isActive":true,"type":"reference"},{"type":"text","text":" type and "},{"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer\/ifLet(_:action:destination:fileID:filePath:line:column:)-4ub6q","isActive":true},{"type":"text","text":" "},{"type":"text","text":"operator:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["@Reducer","struct Feature {","  @ObservableState","  struct State: Equatable {","    @Presents var counter: CounterFeature.State?","  }","  enum Action {","    case counter(PresentationAction<CounterFeature.Action>)","  }","  var body: some Reducer<State, Action> {","    Reduce { state, action in","      \/\/ Logic and behavior for core feature.","    }","    .ifLet(\\.$counter, action: \\.counter) {","      CounterFeature()","    }","  }","}"]},{"type":"paragraph","inlineContent":[{"text":"Now let’s try to write a test on the ","type":"text"},{"type":"codeVoice","code":"Feature"},{"text":" reducer that proves that when the child counter","type":"text"},{"type":"text","text":" "},{"type":"text","text":"feature’s count is incremented above 5 it will dismiss itself. To do this we will construct a"},{"type":"text","text":" "},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore","type":"reference","isActive":true},{"text":" for ","type":"text"},{"code":"Feature","type":"codeVoice"},{"type":"text","text":" that starts in a state with the count already set to 3:"}]},{"type":"codeListing","syntax":"swift","code":["@Test","func dismissal() {","  let store = TestStore(","    initialState: Feature.State(","      counter: CounterFeature.State(count: 3)","    )","  ) {","    CounterFeature()","  }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Then we can send the "},{"code":".incrementButtonTapped","type":"codeVoice"},{"text":" action in the counter child feature to confirm","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"that the count goes up by one:"}]},{"syntax":"swift","code":["await store.send(\\.counter.incrementButtonTapped) {","  $0.counter?.count = 4","}"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"And then we can send it one more time to see that the count goes up to 5:"}]},{"code":["await store.send(\\.counter.incrementButtonTapped) {","  $0.counter?.count = 5","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"And then we finally expect that the child dismisses itself, which manifests itself as the"},{"text":" ","type":"text"},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction\/dismiss","isActive":true,"type":"reference"},{"type":"text","text":" action being sent to "},{"code":"nil","type":"codeVoice"},{"type":"text","text":" out the "},{"type":"codeVoice","code":"counter"},{"type":"text","text":" state, which we can"},{"type":"text","text":" "},{"text":"assert using the ","type":"text"},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore\/receive(_:timeout:assert:fileID:file:line:column:)-53wic","isActive":true,"type":"reference"},{"type":"text","text":" method on "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore"},{"type":"text","text":":"}]},{"code":["await store.receive(\\.counter.dismiss) {","  $0.counter = nil","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"This shows how we can write very nuanced tests on how parent and child features interact with each","type":"text"},{"type":"text","text":" "},{"type":"text","text":"other."}],"type":"paragraph"},{"inlineContent":[{"text":"However, the more complex the features become, the more cumbersome testing their integration can be.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"By default, "},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore","isActive":true,"type":"reference"},{"type":"text","text":" requires us to be exhaustive in our assertions. We must assert on how"},{"text":" ","type":"text"},{"text":"every piece of state changes, how every effect feeds data back into the system, and we must make","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"sure that all effects finish by the end of the test (see "},{"type":"text","text":"doc:Testing"},{"text":" for more info).","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"But "},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore","isActive":true,"type":"reference"},{"type":"text","text":" also supports a form of testing known as “non-exhaustive testing” that allows you"},{"type":"text","text":" "},{"text":"to assert on only the parts of the features that you actually care about (see","type":"text"},{"text":" ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Testing#Non-exhaustive-testing"},{"text":" for more info).","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For example, if we turn off exhaustivity on the test store (see "},{"type":"reference","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore\/exhaustivity","isActive":true},{"type":"text","text":") then we"},{"type":"text","text":" "},{"type":"text","text":"can assert at a high level that when the increment button is tapped twice that eventually we receive"},{"type":"text","text":" "},{"type":"text","text":"a dismiss action:"}]},{"syntax":"swift","type":"codeListing","code":["@Test","func dismissal() {","  let store = TestStore(","    initialState: Feature.State(","      counter: CounterFeature.State(count: 3)","    )","  ) {","    CounterFeature()","  }","  store.exhaustivity = .off","","  await store.send(\\.counter.incrementButtonTapped)","  await store.send(\\.counter.incrementButtonTapped)","  await store.receive(\\.counter.dismiss) ","}"]},{"inlineContent":[{"text":"This essentially proves the same thing that the previous test proves, but it does so in much fewer","type":"text"},{"type":"text","text":" "},{"type":"text","text":"lines and is more resilient to future changes in the features that we don’t necessarily care about."}],"type":"paragraph"},{"inlineContent":[{"text":"That is the basics of testing, but things get a little more complicated when you leverage the","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"concepts outlined in "},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TreeBasedNavigation#Enum-state","isActive":true,"type":"reference"},{"type":"text","text":" in which you model multiple destinations"},{"text":" ","type":"text"},{"type":"text","text":"as an enum instead of multiple optionals. In order to assert on state changes when using enum"},{"text":" ","type":"text"},{"type":"text","text":"state you must chain into the particular case to make a mutation:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["await store.send(\\.destination.counter.incrementButtonTapped) {","  $0.destination?.counter?.count = 4","}"]}],"kind":"content"}],"variants":[{"paths":["\/documentation\/composablearchitecture\/treebasednavigation"],"traits":[{"interfaceLanguage":"swift"}]}],"seeAlsoSections":[{"identifiers":["doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Presents()","doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction","doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer\/ifLet(_:action:destination:fileID:filePath:line:column:)-4ub6q"],"title":"Tree-based navigation","generated":true,"anchor":"Tree-based-navigation"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TreeBasedNavigation"},"metadata":{"roleHeading":"Article","role":"article","modules":[{"name":"ComposableArchitecture"}],"title":"Tree-based navigation"},"kind":"article","sections":[],"abstract":[{"text":"Learn about tree-based navigation, that is navigation modeled with optionals and enums, including","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"how to model your domains, how to integrate features, how to test your features, and more."}],"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture","doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Navigation"],["doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture","doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer","doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Navigation"]]},"references":{"#Integration":{"title":"Integration","url":"#Integration","type":"link","identifier":"#Integration","titleInlineContent":[{"type":"text","text":"Integration"}]},"#Testing":{"title":"Testing","url":"#Testing","type":"link","identifier":"#Testing","titleInlineContent":[{"type":"text","text":"Testing"}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/TreeBasedNavigation#Enum-state":{"type":"topic","abstract":[],"kind":"section","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TreeBasedNavigation#Enum-state","title":"Enum state","url":"\/documentation\/composablearchitecture\/treebasednavigation#Enum-state"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Store":{"title":"Store","navigatorTitle":[{"text":"Store","kind":"identifier"}],"kind":"symbol","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Store","url":"\/documentation\/composablearchitecture\/store","type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Store"}],"abstract":[{"text":"A store represents the runtime that powers the application. It is the object that you will pass","type":"text"},{"type":"text","text":" "},{"text":"around to views that need to interact with the application.","type":"text"}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Reducer":{"url":"\/documentation\/composablearchitecture\/reducer","title":"Reducer","type":"topic","kind":"symbol","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer","role":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Reducer","kind":"identifier"}],"abstract":[{"text":"A protocol that describes how to evolve the current state of an application to the next state,","type":"text"},{"type":"text","text":" "},{"type":"text","text":"given an action, and describes what "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Effect"},{"type":"text","text":"s should be executed later by the store, if any."}],"navigatorTitle":[{"kind":"identifier","text":"Reducer"}]},"#Enum-state":{"title":"Enum state","url":"#Enum-state","type":"link","identifier":"#Enum-state","titleInlineContent":[{"type":"text","text":"Enum state"}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Testing#Non-exhaustive-testing":{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Testing#Non-exhaustive-testing","url":"\/documentation\/composablearchitecture\/testing#Non-exhaustive-testing","abstract":[],"title":"Non-exhaustive testing","kind":"section","type":"topic"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/TestStore/exhaustivity":{"kind":"symbol","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore\/exhaustivity","url":"\/documentation\/composablearchitecture\/teststore\/exhaustivity","type":"topic","role":"symbol","title":"exhaustivity","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"exhaustivity"},{"text":": ","kind":"text"},{"text":"Exhaustivity","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture12ExhaustivityO"}],"abstract":[{"type":"text","text":"The current exhaustivity level of the test store."}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/PresentationAction/dismiss":{"url":"\/documentation\/composablearchitecture\/presentationaction\/dismiss","fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"text":"dismiss","kind":"identifier"}],"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction\/dismiss","kind":"symbol","role":"symbol","title":"PresentationAction.dismiss","abstract":[{"text":"An action sent to ","type":"text"},{"type":"codeVoice","code":"nil"},{"type":"text","text":" out the associated presentation state."}],"type":"topic"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Effect":{"kind":"symbol","type":"topic","title":"Effect","url":"\/documentation\/composablearchitecture\/effect","abstract":[],"role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"text":"Effect","kind":"identifier"}],"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Effect","navigatorTitle":[{"kind":"identifier","text":"Effect"}]},"http://github.com/pointfreeco/swift-case-paths":{"title":"case path","url":"http:\/\/github.com\/pointfreeco\/swift-case-paths","type":"link","identifier":"http:\/\/github.com\/pointfreeco\/swift-case-paths","titleInlineContent":[{"type":"text","text":"case path"}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/TestStore":{"kind":"symbol","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore","url":"\/documentation\/composablearchitecture\/teststore","type":"topic","role":"symbol","navigatorTitle":[{"text":"TestStore","kind":"identifier"}],"title":"TestStore","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"TestStore"}],"abstract":[{"type":"text","text":"A testable runtime for a reducer."}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/DismissEffect":{"abstract":[{"text":"An effect that dismisses the current presentation.","type":"text"}],"title":"DismissEffect","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/DismissEffect","type":"topic","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"DismissEffect"}],"navigatorTitle":[{"kind":"identifier","text":"DismissEffect"}],"kind":"symbol","url":"\/documentation\/composablearchitecture\/dismisseffect"},"#Basics":{"title":"Basics","url":"#Basics","type":"link","identifier":"#Basics","titleInlineContent":[{"type":"text","text":"Basics"}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Effect/run(priority:operation:catch:fileID:filePath:line:column:)":{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Effect\/run(priority:operation:catch:fileID:filePath:line:column:)","url":"\/documentation\/composablearchitecture\/effect\/run(priority:operation:catch:fileid:filepath:line:column:)","title":"run(priority:operation:catch:fileID:filePath:line:column:)","kind":"symbol","role":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"run"},{"kind":"text","text":"("},{"text":"priority","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"TaskPriority","preciseIdentifier":"s:ScP","kind":"typeIdentifier"},{"text":"?, ","kind":"text"},{"text":"operation","kind":"externalParam"},{"text":": (","kind":"text"},{"preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send","kind":"typeIdentifier"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"kind":"text","text":" -> "},{"preciseIdentifier":"s:s4Voida","text":"Void","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"catch"},{"kind":"text","text":": ((any "},{"kind":"typeIdentifier","text":"Error","preciseIdentifier":"s:s5ErrorP"},{"kind":"text","text":", "},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture4SendV","text":"Send"},{"text":"<","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":">) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"text":")?, ","kind":"text"},{"kind":"externalParam","text":"fileID"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:s12StaticStringV","kind":"typeIdentifier","text":"StaticString"},{"kind":"text","text":", "},{"kind":"externalParam","text":"filePath"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s12StaticStringV","text":"StaticString"},{"kind":"text","text":", "},{"kind":"externalParam","text":"line"},{"kind":"text","text":": "},{"preciseIdentifier":"s:Su","kind":"typeIdentifier","text":"UInt"},{"kind":"text","text":", "},{"kind":"externalParam","text":"column"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:Su","text":"UInt"},{"kind":"text","text":") -> "},{"text":"Effect","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture6EffectV"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","text":"Action"},{"text":">","kind":"text"}],"type":"topic","abstract":[{"type":"text","text":"Wraps an asynchronous unit of work that can emit actions any number of times in an effect."}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Reducer/ifLet(_:action:destination:fileID:filePath:line:column:)-4ub6q":{"kind":"symbol","type":"topic","title":"ifLet(_:action:destination:fileID:filePath:line:column:)","url":"\/documentation\/composablearchitecture\/reducer\/iflet(_:action:destination:fileid:filepath:line:column:)-4ub6q","abstract":[{"text":"Embeds a child reducer in a parent domain that works on an optional property of parent state.","type":"text"}],"role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ifLet"},{"kind":"text","text":"<"},{"text":"DestinationState","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"DestinationAction","kind":"genericParameter"},{"kind":"text","text":", "},{"text":"Destination","kind":"genericParameter"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"WritableKeyPath","preciseIdentifier":"s:s15WritableKeyPathC"},{"text":"<","kind":"text"},{"text":"Self","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"State","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa"},{"text":", ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture17PresentationStateV","text":"PresentationState"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","text":"DestinationState"},{"kind":"text","text":">>, "},{"kind":"externalParam","text":"action"},{"kind":"text","text":": "},{"preciseIdentifier":"s:9CasePaths0A7KeyPatha","text":"CaseKeyPath","kind":"typeIdentifier"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Self"},{"text":".","kind":"text"},{"preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa","kind":"typeIdentifier","text":"Action"},{"kind":"text","text":", "},{"text":"PresentationAction","kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture18PresentationActionO"},{"text":"<","kind":"text"},{"text":"DestinationAction","kind":"typeIdentifier"},{"kind":"text","text":">>, "},{"kind":"externalParam","text":"destination"},{"text":": () -> ","kind":"text"},{"kind":"typeIdentifier","text":"Destination"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"fileID"},{"text":": ","kind":"text"},{"text":"StaticString","preciseIdentifier":"s:s12StaticStringV","kind":"typeIdentifier"},{"kind":"text","text":", "},{"text":"filePath","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"StaticString","preciseIdentifier":"s:s12StaticStringV"},{"kind":"text","text":", "},{"text":"line","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Su","text":"UInt"},{"text":", ","kind":"text"},{"text":"column","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Su","text":"UInt"},{"text":") -> ","kind":"text"},{"text":"some","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Reducer","preciseIdentifier":"s:22ComposableArchitecture7ReducerP","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Self","kind":"typeIdentifier"},{"text":".","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:22ComposableArchitecture7ReducerP5StateQa","text":"State"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Self"},{"kind":"text","text":"."},{"preciseIdentifier":"s:22ComposableArchitecture7ReducerP6ActionQa","text":"Action","kind":"typeIdentifier"},{"text":">\n","kind":"text"}],"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer\/ifLet(_:action:destination:fileID:filePath:line:column:)-4ub6q"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/DependencyManagement":{"url":"\/documentation\/composablearchitecture\/dependencymanagement","title":"Dependencies","kind":"article","type":"topic","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/DependencyManagement","abstract":[{"type":"text","text":"Learn how to register dependencies with the library so that they can be immediately accessible from"},{"text":" ","type":"text"},{"text":"any reducer.","type":"text"}],"role":"article"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Navigation":{"role":"collectionGroup","type":"topic","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Navigation","kind":"article","abstract":[{"type":"text","text":"Learn how to use the navigation tools in the library, including how to best model your domains, how"},{"type":"text","text":" "},{"type":"text","text":"to integrate features in the reducer and view layers, and how to write tests."}],"url":"\/documentation\/composablearchitecture\/navigation","title":"Navigation"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/PresentationState":{"title":"PresentationState","navigatorTitle":[{"kind":"identifier","text":"PresentationState"}],"kind":"symbol","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationState","url":"\/documentation\/composablearchitecture\/presentationstate","type":"topic","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"PresentationState"}],"abstract":[{"text":"A property wrapper for state that can be presented.","type":"text"}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture":{"abstract":[{"type":"text","text":"The Composable Architecture (TCA, for short) is a library for building applications in a consistent"},{"text":" ","type":"text"},{"text":"and understandable way, with composition, testing, and ergonomics in mind. It can be used in","type":"text"},{"type":"text","text":" "},{"type":"text","text":"SwiftUI, UIKit, and more, and on any Apple platform (iOS, macOS, tvOS, and watchOS)."}],"url":"\/documentation\/composablearchitecture","role":"collection","kind":"symbol","type":"topic","title":"ComposableArchitecture","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/TestStore/receive(_:timeout:assert:fileID:file:line:column:)-53wic":{"title":"receive(_:timeout:assert:fileID:file:line:column:)","conformance":{"constraints":[{"code":"State","type":"codeVoice"},{"text":" conforms to ","type":"text"},{"code":"Equatable","type":"codeVoice"},{"type":"text","text":"."}],"availabilityPrefix":[{"type":"text","text":"Available when"}],"conformancePrefix":[{"type":"text","text":"Conforms when"}]},"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"receive"},{"text":"<","kind":"text"},{"kind":"genericParameter","text":"Value"},{"text":">(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:9CasePaths0A7KeyPatha","text":"CaseKeyPath"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action"},{"text":", ","kind":"text"},{"text":"Value","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"timeout","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:s8DurationV","text":"Duration","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"assert"},{"kind":"text","text":": (("},{"kind":"keyword","text":"inout"},{"text":" ","kind":"text"},{"kind":"typeIdentifier","text":"State"},{"text":") ","kind":"text"},{"kind":"keyword","text":"throws"},{"text":" -> ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":")?, "},{"kind":"externalParam","text":"fileID"},{"kind":"text","text":": "},{"text":"StaticString","preciseIdentifier":"s:s12StaticStringV","kind":"typeIdentifier"},{"kind":"text","text":", "},{"kind":"externalParam","text":"file"},{"text":": ","kind":"text"},{"text":"StaticString","kind":"typeIdentifier","preciseIdentifier":"s:s12StaticStringV"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"line"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UInt","preciseIdentifier":"s:Su"},{"kind":"text","text":", "},{"text":"column","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:Su","kind":"typeIdentifier","text":"UInt"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"}],"kind":"symbol","url":"\/documentation\/composablearchitecture\/teststore\/receive(_:timeout:assert:fileid:file:line:column:)-53wic","abstract":[{"text":"Asserts an action was received matching a case path and asserts how the state changes.","type":"text"}],"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/TestStore\/receive(_:timeout:assert:fileID:file:line:column:)-53wic","type":"topic","role":"symbol"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/PresentationAction":{"title":"PresentationAction","navigatorTitle":[{"kind":"identifier","text":"PresentationAction"}],"kind":"symbol","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction","url":"\/documentation\/composablearchitecture\/presentationaction","type":"topic","role":"symbol","fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"PresentationAction"}],"abstract":[{"type":"text","text":"A wrapper type for actions that can be presented."}]},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Reducer()":{"type":"topic","title":"Reducer()","abstract":[{"text":"Helps implement the conformance to the ","type":"text"},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer","isActive":true,"type":"reference"},{"type":"text","text":" protocol for a type."}],"fragments":[{"kind":"keyword","text":"macro"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Reducer"},{"text":"()","kind":"text"}],"kind":"symbol","role":"symbol","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Reducer()","url":"\/documentation\/composablearchitecture\/reducer()"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/PresentationAction/presented(_:)":{"url":"\/documentation\/composablearchitecture\/presentationaction\/presented(_:)","fragments":[{"kind":"keyword","text":"case"},{"text":" ","kind":"text"},{"text":"presented","kind":"identifier"},{"text":"(","kind":"text"},{"text":"Action","kind":"typeIdentifier"},{"text":")","kind":"text"}],"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationAction\/presented(_:)","kind":"symbol","role":"symbol","title":"PresentationAction.presented(_:)","abstract":[{"type":"text","text":"An action sent to the associated, non-"},{"type":"codeVoice","code":"nil"},{"text":" presentation state.","type":"text"}],"type":"topic"},"doc://ComposableArchitecture/documentation/ComposableArchitecture/Presents()":{"title":"Presents()","url":"\/documentation\/composablearchitecture\/presents()","identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/Presents()","abstract":[{"text":"Wraps a property with ","type":"text"},{"identifier":"doc:\/\/ComposableArchitecture\/documentation\/ComposableArchitecture\/PresentationState","type":"reference","isActive":true},{"type":"text","text":" and observes it."}],"type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"macro"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Presents"},{"text":"()","kind":"text"}],"kind":"symbol"},"#Dismissal":{"title":"Dismissal","url":"#Dismissal","type":"link","identifier":"#Dismissal","titleInlineContent":[{"type":"text","text":"Dismissal"}]}}}